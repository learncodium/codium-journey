<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<title>Codium Dashboard</title>
</head>
<body style="font-family: Inter, sans-serif; background:#0f0f0f; color:white; text-align:center; padding-top:100px;">
<h1>Welcome to Codium ðŸš€</h1>
<p id="user-info"></p>
<button id="logout">Log Out</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const client = supabase.createClient(
  "https://esdzwumkkdnlxsiljlzp.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVzZHp3dW1ra2RubHhzaWxqbHpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NDkxMzAsImV4cCI6MjA3NjIyNTEzMH0.ZTcGGjJGqZhWam-iwewA5Dc6q13BgkCIY4a2_TYBhu0"
);

(async () => {
  const { data: { user } } = await client.auth.getUser();
  if (!user) {
    alert("Please sign in first!");
    window.location.href = "https://learncodium.github.io/codium-journey/register";
    return;
  }

  const chosenLang = localStorage.getItem("chosenLanguage");
  document.getElementById("user-info").innerHTML = `
    Logged in as: <b>${user.email}</b><br><br>
    <h2>Learning: ${chosenLang || "No language selected ðŸ˜…"}</h2>
  `;

  // Example lesson placeholders
  const lessonsDiv = document.createElement("div");
  lessonsDiv.style.marginTop = "30px";

  const lessons = {
    Python: ["Intro to Python", "Variables & Data Types", "Loops", "Functions"],
    HTML: ["HTML Basics", "Forms", "Links & Images", "Layouts"],
    JavaScript: ["JS Basics", "DOM Manipulation", "Events", "Fetch API"],
    Java: ["Java Setup", "OOP", "Collections", "Exceptions"],
    "C++": ["Syntax", "Classes", "Pointers", "STL"],
    SQL: ["Tables", "Queries", "Joins", "Aggregation"],
    CSS: ["Selectors", "Box Model", "Flexbox", "Animations"]
  };

  const selectedLessons = lessons[chosenLang?.split(" ")[1]] || [];
  lessonsDiv.innerHTML = selectedLessons.length
    ? `<h3>Your first lessons:</h3><ul>${selectedLessons.map(l => `<li>${l}</li>`).join("")}</ul>`
    : `<p>No lessons found for this choice.</p>`;

  document.body.appendChild(lessonsDiv);
})();

document.getElementById("logout").addEventListener("click", async () => {
  await client.auth.signOut();
  alert("You have been logged out!");
  localStorage.removeItem("chosenLanguage");
  window.location.href = "https://learncodium.github.io/codium-journey/register";
});
</script>
</body>
</html>
